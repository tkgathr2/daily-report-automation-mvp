# Claude Code - 動作ルール

## 概要

Claude Codeがこのプロジェクトで作業する際に従うべきルール・制約を定義する。

---

## 1. 基本原則

### 1.1 Claude Codeは実装専用

Claude Codeの役割は **実装のみ**。

- SSOTに基づく実装を行う
- 指示されたフェーズの作業のみ行う
- 実装以外の判断はユーザーに委ねる

### 1.2 SSOTの遵守

判断の根拠は以下の3ファイルのみ:

1. `docs/takagi_flow.md` - 開発ワークフロー
2. `docs/claude_code_rules.md` - このファイル（動作ルール）
3. `docs/requirements.md` - 要件定義

上記に記載がない場合は、作業を停止してユーザーに確認する。

### 1.3 フェーズ未指定時の扱い

ユーザーからフェーズの指定がない場合は **Askフェーズ** として扱う。

- 確認・質問・列挙のみ行う
- 実装は行わない
- 修正案・改善案は出力しない

---

## 2. 禁止事項

| No | 禁止事項 | 理由 |
|----|----------|------|
| 1 | 推測に基づく実装 | 仕様と異なる実装になるリスク |
| 2 | 仕様変更の提案 | SSOTの一貫性が崩れる |
| 3 | SSOTに記載のない機能の追加 | スコープ外の作業 |
| 4 | 勝手な改善・リファクタリング | ユーザーの意図と異なるリスク |
| 5 | 複数機能の同時実装 | 1機能=1PRの原則に違反 |
| 6 | Cursor設定・過去チャット・一般知識による判断 | SSOTのみが判断根拠 |

---

## 3. 作業手順

### 3.1 初回起動時（PC変更・セッション変更後）

1. 以下の3ファイルを全文読み込む
   - `docs/takagi_flow.md`
   - `docs/claude_code_rules.md`
   - `docs/requirements.md`

2. 3ファイル間の矛盾・曖昧点を列挙する（修正はしない）

3. 問題がなければ「SSOT読み込み完了。次の指示を待ちます。」と出力して停止

### 3.2 各作業開始前

1. 現在のフェーズを確認する（Ask / Plan / Impl / Debug）
2. SSOTに該当する仕様があるか確認する
3. 不明点があれば作業を停止し、ユーザーに確認する

---

## 4. 出力形式ルール

### 4.1 Askフェーズ

- 確認事項を箇条書きで列挙
- 実装コードは出力しない
- 修正案・改善案は出力しない（明示的に求められた場合を除く）

### 4.2 Planフェーズ

- 実装手順を番号付きリストで提示
- 変更対象ファイルを明記
- 影響範囲を明記

### 4.3 Implフェーズ

- コード変更を実施
- 変更内容を箇条書きで報告
- テスト結果を報告

### 4.4 Debugフェーズ

- 問題の原因を特定して報告
- 修正内容を箇条書きで報告
- 修正後の動作確認結果を報告

---

## 5. プロジェクト情報

### 5.1 基本情報

| 項目 | 内容 |
|------|------|
| プロジェクト名 | 簡単日報くん |
| リポジトリ名 | `daily-report-automation-mvp` |
| リポジトリURL | https://github.com/tkgathr2/daily-report-automation-mvp |
| 作業ディレクトリ | `C:\Users\takag\00_dev\daily-report-automation-mvp` |

### 5.2 技術スタック

- Google Apps Script (GAS)
- GAS HTMLサービス（WEBアプリ）
- Google Calendar API
- Slack Incoming Webhook

### 5.3 変更対象ファイル

| ファイル | 説明 |
|----------|------|
| `src/Code.gs` | バックエンド（GAS） |
| `src/Index.html` | フロントエンド（HTML/CSS/JS） |

---

以上
