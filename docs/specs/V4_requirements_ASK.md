# V4 要件定義書（Ask）

## ドキュメント情報

| 項目 | 内容 |
|------|------|
| 文書名 | 簡単日報くん V4 要件定義書 |
| バージョン | 3.0（最終100点版） |
| 作成日 | 2026-01-24 |
| フェーズ | Ask（要件定義）完了 |
| 前提バージョン | V3（Slack/Gmail/Notion連携） |

---

## 1. 目的・背景

### 1.1 目的

V3に続き、**Googleドキュメント・Google Drive・Dropbox**の利用履歴を自動取得して
「今日やったこと」に追加し、ファイル操作の作業記録も自動化する。

### 1.2 背景

- 業務ではドキュメント編集やファイル操作も頻繁に行われる
- これらの作業は日報に書き忘れやすい
- 自動取得すれば抜け漏れを防げる

---

## 2. 対象機能一覧

| No | 機能ID | 機能名 | 概要 | 難易度 |
|----|--------|--------|------|:------:|
| 1 | A3 | Googleドキュメント履歴の自動取得 | 編集したドキュメントを自動で集める | 高 |
| 2 | A4 | Google Drive履歴の自動取得 | ファイル操作を自動で集める | 高 |
| 3 | A5 | Dropbox履歴の自動取得 | ファイル操作を自動で集める | 高 |

---

## 3. 機能詳細

### 3.1 Googleドキュメント履歴の自動取得（A3）

#### 取得対象
- 自分が当日編集したGoogleドキュメント
- 自分が当日作成したGoogleドキュメント

#### 表示形式
```
⚫︎ [Docs] 編集: 「プロジェクト計画書」
⚫︎ [Docs] 作成: 「議事録 2026/01/24」
```

#### 認証方式
- GASのDriveApp / DocumentApp（自動認証）

---

### 3.2 Google Drive履歴の自動取得（A4）

#### 取得対象
- 自分が当日アップロードしたファイル
- 自分が当日編集したファイル
- 自分が当日移動/コピーしたファイル

#### 表示形式
```
⚫︎ [Drive] アップロード: 「見積書.xlsx」
⚫︎ [Drive] 編集: 「報告書.pdf」
```

#### 認証方式
- GASのDriveApp（自動認証）

---

### 3.3 Dropbox履歴の自動取得（A5）

#### 取得対象
- 自分が当日アップロードしたファイル
- 自分が当日編集したファイル

#### 表示形式
```
⚫︎ [Dropbox] アップロード: 「契約書.docx」
⚫︎ [Dropbox] 編集: 「データ.csv」
```

#### 認証方式
- Dropbox API（OAuth 2.0）
- Access Token設定が必要

---

## 4. 受け入れ条件

| No | 受け入れ条件 |
|----|--------------|
| 1 | Googleドキュメント履歴が「今日やったこと」に表示される |
| 2 | Google Drive履歴が「今日やったこと」に表示される |
| 3 | Dropbox履歴が「今日やったこと」に表示される |
| 4 | 各ツールのON/OFFが設定できる（V3の設定UIを拡張） |
| 5 | V3機能（Slack/Gmail/Notion）が正常に動作する |

---

## 5. NG例

| No | NG例 | 理由 |
|----|------|------|
| 1 | 他人のファイルが取得される | 対象外 |
| 2 | 認証エラーでアプリ全体が動かなくなる | 影響範囲が大きい |
| 3 | V3機能が動かなくなる | 後方互換性 |

---

## 6. 例外ケース

| No | 例外ケース | 対応方針 |
|----|------------|----------|
| 1 | Dropbox Token未設定 | Dropbox履歴のみスキップ |
| 2 | Drive API制限 | Drive履歴のみスキップ |
| 3 | 取得データが大量 | 最新20件に絞る |

---

## 7. 今回やらないこと（Won't）

| No | やらないこと | 理由 |
|----|--------------|------|
| 1 | Zoom/Google Meet連携 | V5で対応 |
| 2 | 社内ツール連携 | V5で対応 |
| 3 | AIによる重要度並べ替え | V6で対応 |

---

## 改定履歴

| バージョン | 日付 | 内容 |
|------------|------|------|
| 3.0 | 2026-01-24 | 最終100点版 |
