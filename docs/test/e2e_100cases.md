# 簡単日報君 E2Eテストケース一覧（100件）

## テスト環境情報

| 項目 | 値 |
|------|-----|
| 対象ブランチ | master |
| コミットID | bafad7fbdcfe07a846c5914a20d139b5c9a44f86 |
| 本番URL | https://nippou.up.railway.app |
| GAS /exec URL | https://script.google.com/a/macros/takagi.bz/s/AKfycbyRu1Sye5cpmXqoqfGOI2BBReFh4cvqhkSr9CW7JS2XyhY7q32tv3A5gLG5rGwNtO5a4Q/exec |
| 想定ユーザドメイン | takagi.bz, stepupnext.com, kotsuyudo.com |
| 想定ブラウザ | Chrome最新版（デスクトップ）、Safari（iPhone） |
| 作成日 | 2026-02-22 |

---

## カテゴリ1: 起動/リダイレクト/アクセス制御（TC-001〜TC-015）

### TC-001: Railway本番URLにアクセス（クエリなし）
- **目的**: ログイン画面が正常に表示されるか
- **前提**: 未ログイン状態
- **手順**: ブラウザで `https://nippou.up.railway.app` にアクセス
- **期待結果**: ログイン画面（「簡単日報くん」タイトル、「Googleでログイン」ボタン）が表示される。HTTP 200。

### TC-002: Railway本番URLにクエリパラメータ付きでアクセス
- **目的**: クエリパラメータがGASに正しく転送されるか
- **前提**: 未ログイン状態
- **手順**: `https://nippou.up.railway.app/?test=1` にアクセス
- **期待結果**: GAS /exec URLへ `?from=nippou&test=1` 付きで302リダイレクトされる

### TC-003: GAS /exec URLに直接アクセス（from=nippouなし）
- **目的**: GAS直接アクセス防止が機能するか
- **前提**: 未ログイン状態
- **手順**: GAS /exec URLに直接アクセス（`?from=nippou`パラメータなし）
- **期待結果**: `https://nippou.up.railway.app` へリダイレクトされる（window.top.location.href）

### TC-004: GAS /exec URLに`?from=nippou`付きでアクセス
- **目的**: 正規経路でのGASアクセスが通るか
- **前提**: Googleログイン済み、許可ドメインのアカウント
- **手順**: GAS /exec URL + `?from=nippou` にアクセス
- **期待結果**: 簡単日報君のメイン画面が表示される

### TC-005: /favicon.ico のレスポンス確認
- **目的**: ファビコンが正しく返されるか
- **前提**: なし
- **手順**: `https://nippou.up.railway.app/favicon.ico` にアクセス
- **期待結果**: SVG形式のファビコンが返される。Content-Type: image/svg+xml。HTTP 200。

### TC-006: 存在しないパスへのアクセス
- **目的**: 不明パスのリダイレクト処理
- **前提**: なし
- **手順**: `https://nippou.up.railway.app/nonexistent` にアクセス
- **期待結果**: GAS /exec URL + `?from=nippou` へ302リダイレクトされる

### TC-007: /oauth/callback にパラメータなしでアクセス
- **目的**: OAuthコールバック空パラメータの挙動
- **前提**: なし
- **手順**: `https://nippou.up.railway.app/oauth/callback` にアクセス
- **期待結果**: GAS /exec URLへリダイレクトされる（クエリなし）。エラーページまたはGASのエラーハンドリング。

### TC-008: /oauth/callback に疑似codeパラメータ付きでアクセス
- **目的**: OAuthプロキシのリダイレクト先確認
- **前提**: なし
- **手順**: `https://nippou.up.railway.app/oauth/callback?code=fake&state=fake` にアクセス
- **期待結果**: GAS /exec URL + `?code=fake&state=fake` へ302リダイレクトされる

### TC-009: /oauth/callback にerrorパラメータ付きでアクセス
- **目的**: OAuth エラー時のプロキシ挙動
- **前提**: なし
- **手順**: `https://nippou.up.railway.app/oauth/callback?error=access_denied` にアクセス
- **期待結果**: GAS /exec URL + `?error=access_denied` へリダイレクトされ、GAS側でエラー表示

### TC-010: HTTPヘッダーの確認（セキュリティ）
- **目的**: レスポンスヘッダーの確認
- **前提**: なし
- **手順**: `curl -I https://nippou.up.railway.app` でヘッダーを確認
- **期待結果**: Content-Type: text/html; charset=utf-8 が含まれる

### TC-011: 大量クエリパラメータでのアクセス
- **目的**: 異常な長さのクエリでの安定性
- **前提**: なし
- **手順**: `https://nippou.up.railway.app/?a=` + 10000文字のランダム文字列でアクセス
- **期待結果**: サーバーがクラッシュせず、正常にリダイレクトまたはエラーを返す

### TC-012: 特殊文字を含むクエリパラメータ
- **目的**: URLエンコーディングの処理
- **前提**: なし
- **手順**: `https://nippou.up.railway.app/?param=<script>alert(1)</script>` にアクセス
- **期待結果**: XSSが発動せず、安全にリダイレクトされる

### TC-013: HEADメソッドでのアクセス
- **目的**: HEAD リクエストの処理
- **前提**: なし
- **手順**: `curl -I -X HEAD https://nippou.up.railway.app` を実行
- **期待結果**: HTTP 200が返り、ボディなし

### TC-014: POSTメソッドでルートにアクセス
- **目的**: 不正メソッドの処理
- **前提**: なし
- **手順**: `curl -X POST https://nippou.up.railway.app` を実行
- **期待結果**: エラーにならず適切なレスポンスが返る（200または405）

### TC-015: 同時複数リクエスト（負荷テスト軽量版）
- **目的**: 同時接続での安定性
- **前提**: なし
- **手順**: 5つの並列リクエストを `https://nippou.up.railway.app` に送信
- **期待結果**: 全リクエストが正常にレスポンスを返す（タイムアウトなし）

---

## カテゴリ2: ログイン/セッション/OAuth導線（TC-016〜TC-030）

### TC-016: Googleでログインボタンの遷移先
- **目的**: ログインボタンのリンク先が正しいか
- **前提**: ログイン画面が表示された状態
- **手順**: 「Googleでログイン」ボタンのhref属性を確認
- **期待結果**: GAS /exec URL + `?from=nippou` がリンク先として設定されている

### TC-017: ログイン画面のHTML構造確認
- **目的**: ログイン画面の主要要素が存在するか
- **前提**: なし
- **手順**: ログイン画面のHTMLソースを確認
- **期待結果**: `<h1>簡単日報くん</h1>`、`Googleでログイン`テキスト、ロゴSVGが存在する

### TC-018: ログイン画面のモバイル表示
- **目的**: モバイルビューでの表示崩れがないか
- **前提**: なし
- **手順**: モバイルビューポート（375x667）でログイン画面を表示
- **期待結果**: ログインカードが画面幅に収まり、ボタンがタップ可能なサイズ

### TC-019: Googleログインフロー（許可ドメイン）
- **目的**: takagi.bzドメインでのログイン成功
- **前提**: takagi.bzドメインのGoogleアカウント
- **手順**: 1. ログイン画面で「Googleでログイン」をクリック 2. Googleアカウントを選択 3. 権限を許可
- **期待結果**: 簡単日報君メイン画面が表示される
- **実行可否**: 手動テスト（Google認証情報必要）

### TC-020: Googleログインフロー（stepupnext.comドメイン）
- **目的**: stepupnext.comドメインでのログイン成功
- **前提**: stepupnext.comドメインのGoogleアカウント
- **手順**: TC-019と同様
- **期待結果**: 簡単日報君メイン画面が表示される
- **実行可否**: 手動テスト（Google認証情報必要）

### TC-021: Googleログインフロー（kotsuyudo.comドメイン）
- **目的**: kotsuyudo.comドメインでのログイン成功
- **前提**: kotsuyudo.comドメインのGoogleアカウント
- **手順**: TC-019と同様
- **期待結果**: 簡単日報君メイン画面が表示される
- **実行可否**: 手動テスト（Google認証情報必要）

### TC-022: Googleログインフロー（非許可ドメイン）
- **目的**: 許可されていないドメインでのアクセス拒否
- **前提**: gmail.comなど非許可ドメインのGoogleアカウント
- **手順**: 1. ログイン画面で「Googleでログイン」をクリック 2. 非許可ドメインのGoogleアカウントでログイン
- **期待結果**: アクセス拒否画面が表示される（「アクセス権限がありません」メッセージ）
- **実行可否**: 手動テスト（Google認証情報必要）

### TC-023: Slack OAuth認可ボタンの存在確認
- **目的**: メイン画面にSlack連携ボタンがあるか
- **前提**: ログイン済み状態（メイン画面表示）
- **手順**: メイン画面のHTMLで Slack連携関連のUI要素を確認
- **期待結果**: Slack連携（認可）ボタンまたはリンクが存在する（非表示の場合はその確認）
- **実行可否**: 手動テスト（Googleログイン必要）

### TC-024: Slack OAuth認可URLの生成確認
- **目的**: getSlackAuthorizeUrl()が正しいURLを返すか
- **前提**: GAS Script PropertiesにSLACK_CLIENT_IDが設定済み
- **手順**: GASのログからgetSlackAuthorizeUrl()の戻り値を確認
- **期待結果**: `https://slack.com/oauth/v2/authorize?client_id=...&redirect_uri=https://nippou.up.railway.app/oauth/callback&user_scope=chat:write,search:read&state=...` 形式のURL
- **実行可否**: 手動テスト（GASログアクセス必要）

### TC-025: Slack OAuth完了後のリダイレクト
- **目的**: OAuth完了後にアプリに戻れるか
- **前提**: Slack OAuth認可を完了
- **手順**: Slack認可画面で許可→コールバック→GASでトークン交換→「アプリに戻る」リンク表示
- **期待結果**: 「Slack連携が完了しました」メッセージと「アプリに戻る」リンクが表示される
- **実行可否**: 手動テスト（Slack認証情報必要）

### TC-026: Slack OAuth state期限切れ
- **目的**: state有効期限（10分）超過時のエラー表示
- **前提**: Slack OAuth認可URLを取得後、10分以上経過
- **手順**: 10分以上前に取得したOAuth認可URLでSlack認可を完了
- **期待結果**: 「state検証に失敗しました。もう一度「Slack連携（認可）」からやり直してください。」エラー
- **実行可否**: 手動テスト（Slack認証情報必要）

### TC-027: Slack OAuthでユーザーが拒否した場合
- **目的**: ユーザーがSlack認可を拒否した時の処理
- **前提**: Slack OAuth認可画面が表示された状態
- **手順**: Slack認可画面で「キャンセル」を選択
- **期待結果**: `?error=access_denied` → GASで「Slack連携に失敗しました」エラー表示
- **実行可否**: 手動テスト（Slack認証情報必要）

### TC-028: ログイン画面のCSS読み込み確認
- **目的**: スタイルが正しく適用されているか
- **前提**: なし
- **手順**: ログイン画面でCSSが適用されているか目視確認（グラデーション背景、カード型レイアウト）
- **期待結果**: 青グラデーション背景、白カード、角丸ボタンが表示される

### TC-029: ログイン画面のファビコン表示
- **目的**: ファビコンがブラウザタブに表示されるか
- **前提**: なし
- **手順**: ログイン画面をブラウザで開き、タブのファビコンを確認
- **期待結果**: Paper+Pencilアイコンのファビコンが表示される

### TC-030: ログイン画面でブラウザの戻るボタン
- **目的**: ブラウザバックでの挙動
- **前提**: ログイン画面にアクセスした状態
- **手順**: ブラウザの「戻る」ボタンを押す
- **期待結果**: 前のページに正常に戻る（無限リダイレクトループにならない）

---

## カテゴリ3: 日付選択/予定取得/テンプレ反映（TC-031〜TC-045）

### TC-031: メイン画面の初期表示
- **目的**: メイン画面が正常にロードされるか
- **前提**: ログイン済み（許可ドメイン）
- **手順**: GAS経由でメイン画面にアクセス
- **期待結果**: 「簡単日報君v4.0」タイトル、日報ヘッダー（日付＋氏名）、4セクション、ボタン群が表示
- **実行可否**: 手動テスト（Googleログイン必要）

### TC-032: 日報ヘッダーの日付自動表示
- **目的**: 本日の日付が正しく表示されるか
- **前提**: メイン画面表示済み
- **手順**: ヘッダーの日付部分を確認
- **期待結果**: 「YYYY年MM月DD日」形式で本日の日付が表示
- **実行可否**: 手動テスト

### TC-033: 日報ヘッダーの氏名自動取得
- **目的**: Googleアカウントから氏名が取得されるか
- **前提**: メイン画面表示済み
- **手順**: ヘッダーの氏名部分を確認
- **期待結果**: Googleアカウントのメールアドレスから生成された氏名が表示される（例: Atsuhiro Takagi）
- **実行可否**: 手動テスト

### TC-034: 予定取得ボタンクリック（予定あり）
- **目的**: カレンダー予定が正常に取得されるか
- **前提**: メイン画面表示済み、当日にカレンダー予定が存在
- **手順**: 画面上の予定取得機能（自動ロードまたはボタン）で予定を取得
- **期待結果**: 「今日やったこと」セクションにカレンダー予定が時刻順で表示
- **実行可否**: 手動テスト

### TC-035: 予定取得ボタンクリック（予定なし）
- **目的**: 予定0件時の表示
- **前提**: 当日にカレンダー予定が0件
- **手順**: 予定を取得
- **期待結果**: エラーにならず、「今日やったこと」セクションが空またはプレースホルダーで表示
- **実行可否**: 手動テスト

### TC-036: 日付選択機能（日付ピッカーの表示）
- **目的**: 日付選択UIが存在し動作するか
- **前提**: メイン画面表示済み
- **手順**: 日付選択入力を確認
- **期待結果**: 日付入力フィールドが表示され、カレンダーUIから日付を選択できる
- **実行可否**: 手動テスト

### TC-037: 日付選択で過去日を指定
- **目的**: 過去の日付の予定が取得できるか
- **前提**: メイン画面表示済み
- **手順**: 日付ピッカーで昨日の日付を選択し、予定を取得
- **期待結果**: 昨日のカレンダー予定が「今日やったこと」に表示される
- **実行可否**: 手動テスト

### TC-038: 日付選択で未来日を指定
- **目的**: 未来の日付の予定が取得できるか
- **前提**: メイン画面表示済み
- **手順**: 日付ピッカーで明日の日付を選択し、予定を取得
- **期待結果**: 明日のカレンダー予定が「今日やったこと」に表示される
- **実行可否**: 手動テスト

### TC-039: 終日イベントの表示形式
- **目的**: 終日イベントが正しくフォーマットされるか
- **前提**: カレンダーに終日イベントが存在
- **手順**: 終日イベントがある日の予定を取得
- **期待結果**: 「終日 [イベント名]」形式で表示される
- **実行可否**: 手動テスト

### TC-040: 通常イベントの表示形式
- **目的**: 時刻付きイベントが正しくフォーマットされるか
- **前提**: カレンダーに通常イベントが存在
- **手順**: 通常イベントがある日の予定を取得
- **期待結果**: 「HH:mm-HH:mm [イベント名]」形式で表示される
- **実行可否**: 手動テスト

### TC-041: テンプレートの4セクション構成確認
- **目的**: 4セクションが正しく表示されるか
- **前提**: メイン画面表示済み
- **手順**: 画面上の各セクションの存在を確認
- **期待結果**: 「今日やったこと」「わかった事・問題・共有事項」「売上・利益・経費削減に関わるポイント」「次すること」の4セクションが表示
- **実行可否**: 手動テスト

### TC-042: 「次すること」翌日引き継ぎ表示
- **目的**: 前日の「次すること」が自動表示されるか
- **前提**: 前日にSlack送信済み（「次すること」保存済み）
- **手順**: 翌日にメイン画面にアクセス
- **期待結果**: 「次すること」セクションに前日の内容がプリセットされている
- **実行可否**: 手動テスト

### TC-043: 「次すること」同日引き継ぎなし
- **目的**: 同日送信後は引き継ぎが表示されないか
- **前提**: 当日中にSlack送信済み
- **手順**: 同日中に再度メイン画面にアクセス
- **期待結果**: 「次すること」セクションは空のまま（同日中は引き継ぎ非表示）
- **実行可否**: 手動テスト

### TC-044: 予定取得中のローディング表示
- **目的**: ローディング表示が正しく動作するか
- **前提**: メイン画面表示済み
- **手順**: 予定取得を実行し、取得完了までの表示を確認
- **期待結果**: ローディングスピナーが表示され、取得完了後に消える
- **実行可否**: 手動テスト

### TC-045: 予定取得エラー時の表示
- **目的**: カレンダーAPIエラー時の表示
- **前提**: カレンダーアクセス権限がない、またはAPI障害時
- **手順**: カレンダーアクセス権限のないアカウントで予定取得を試みる
- **期待結果**: エラーメッセージが表示される（「カレンダーへのアクセス権限がありません」等）
- **実行可否**: 手動テスト

---

## カテゴリ4: 編集/フォーマット/コピーボタン/入力バリデーション（TC-046〜TC-060）

### TC-046: 「今日やったこと」テキスト編集
- **目的**: テキストエリアが編集可能か
- **前提**: メイン画面表示済み、予定取得済み
- **手順**: 「今日やったこと」テキストエリアにテキストを追加入力
- **期待結果**: テキストの追加・削除・変更が可能
- **実行可否**: 手動テスト

### TC-047: 「わかった事・問題・共有事項」テキスト編集
- **目的**: 手入力セクションの編集
- **前提**: メイン画面表示済み
- **手順**: 「わかった事・問題・共有事項」テキストエリアにテキストを入力
- **期待結果**: 自由にテキスト入力が可能
- **実行可否**: 手動テスト

### TC-048: 「売上・利益に関わるポイント」テキスト編集
- **目的**: 手入力セクションの編集
- **前提**: メイン画面表示済み
- **手順**: 「売上・利益・経費削減に関わるポイント」テキストエリアにテキストを入力
- **期待結果**: 自由にテキスト入力が可能
- **実行可否**: 手動テスト

### TC-049: 「次すること」テキスト編集
- **目的**: 手入力セクションの編集
- **前提**: メイン画面表示済み
- **手順**: 「次すること」テキストエリアにテキストを入力
- **期待結果**: 自由にテキスト入力が可能
- **実行可否**: 手動テスト

### TC-050: 太字フォーマットボタン
- **目的**: WYSIWYGツールバーの太字機能
- **前提**: メイン画面表示済み、テキストエリアにテキストあり
- **手順**: テキストを選択し、太字ボタン（B）をクリック
- **期待結果**: 選択テキストが太字になる（`*テキスト*` 形式）
- **実行可否**: 手動テスト

### TC-051: 斜体フォーマットボタン
- **目的**: WYSIWYGツールバーの斜体機能
- **前提**: メイン画面表示済み、テキストエリアにテキストあり
- **手順**: テキストを選択し、斜体ボタン（I）をクリック
- **期待結果**: 選択テキストが斜体になる
- **実行可否**: 手動テスト

### TC-052: 下線フォーマットボタン
- **目的**: WYSIWYGツールバーの下線機能
- **前提**: メイン画面表示済み、テキストエリアにテキストあり
- **手順**: テキストを選択し、下線ボタン（U）をクリック
- **期待結果**: 選択テキストに下線が付く
- **実行可否**: 手動テスト

### TC-053: 取り消し線フォーマットボタン
- **目的**: WYSIWYGツールバーの取り消し線機能
- **前提**: メイン画面表示済み、テキストエリアにテキストあり
- **手順**: テキストを選択し、取り消し線ボタン（S）をクリック
- **期待結果**: 選択テキストに取り消し線が付く
- **実行可否**: 手動テスト

### TC-054: リンク挿入ボタン
- **目的**: リンク挿入機能
- **前提**: メイン画面表示済み
- **手順**: テキストを選択し、リンクボタン（🔗）をクリック
- **期待結果**: リンクURL入力プロンプトが表示され、入力後にリンク形式で挿入される
- **実行可否**: 手動テスト

### TC-055: 箇条書きボタン
- **目的**: 箇条書きリスト機能
- **前提**: メイン画面表示済み
- **手順**: テキストエリアで箇条書きボタン（•≡）をクリック
- **期待結果**: カーソル位置に箇条書きマーカーが挿入される
- **実行可否**: 手動テスト

### TC-056: コピーボタンの動作
- **目的**: クリップボードコピー機能
- **前提**: メイン画面表示済み、テキストエリアにテキストあり
- **手順**: 「コピー」ボタンをクリック
- **期待結果**: テキストエリアの内容がクリップボードにコピーされ、成功メッセージが表示される
- **実行可否**: 手動テスト

### TC-057: 全セクション空で送信試行
- **目的**: 必須バリデーション（全セクション空）
- **前提**: メイン画面表示済み、全セクションが空
- **手順**: 「Slackに投稿」ボタンをクリック
- **期待結果**: エラーメッセージが表示され、送信されない
- **実行可否**: 手動テスト

### TC-058: 一部セクションのみ空で送信試行
- **目的**: 必須バリデーション（一部空）
- **前提**: メイン画面表示済み、「わかった事」セクションのみ空
- **手順**: 他の3セクションに入力し、「わかった事」を空のまま「Slackに投稿」
- **期待結果**: エラーメッセージが表示され、送信されない（空欄のセクションが示される）
- **実行可否**: 手動テスト

### TC-059: 空白文字のみで送信試行
- **目的**: 空白のみバリデーション
- **前提**: メイン画面表示済み
- **手順**: 全セクションにスペースのみ入力し、「Slackに投稿」
- **期待結果**: エラーメッセージが表示され、送信されない（空白のみは不可）
- **実行可否**: 手動テスト

### TC-060: 名前編集機能
- **目的**: 設定メニューからの名前変更
- **前提**: メイン画面表示済み
- **手順**: 歯車アイコン→「名前を編集」→新しい名前を入力→保存
- **期待結果**: ヘッダーの氏名が更新される
- **実行可否**: 手動テスト

---

## カテゴリ5: Slack投稿と投稿後画面（TC-061〜TC-070）

### TC-061: Slack投稿成功（正常ケース）
- **目的**: 全セクション入力済みでSlack投稿が成功するか
- **前提**: Slack連携済み、全セクションに入力あり
- **手順**: 全セクションにテキストを入力し、「Slackに投稿」ボタンをクリック
- **期待結果**: 「送信成功：Slackに投稿しました。」メッセージが表示される
- **実行可否**: 手動テスト（Slack連携・投稿が発生するため、テスト環境推奨）

### TC-062: Slack投稿後の「次すること」保存確認
- **目的**: 投稿成功時に「次すること」がUserPropertiesに保存されるか
- **前提**: TC-061で投稿成功
- **手順**: 投稿後、GASログまたは翌日のアクセスで「次すること」が保存されたか確認
- **期待結果**: 「次すること」の内容がUserPropertiesに保存される
- **実行可否**: 手動テスト

### TC-063: Slack未連携状態で投稿試行
- **目的**: Slack連携なしでのエラー表示
- **前提**: Slack未連携の状態
- **手順**: 全セクションに入力し、「Slackに投稿」ボタンをクリック
- **期待結果**: 「Slack連携が必要です。画面下部の「Slack連携（認可）」ボタンからSlackアカウントを連携してください。」エラー
- **実行可否**: 手動テスト

### TC-064: Slackトークン失効状態で投稿試行
- **目的**: トークン失効時のエラー表示
- **前提**: Slackトークンが失効または無効化された状態
- **手順**: 全セクションに入力し、「Slackに投稿」ボタンをクリック
- **期待結果**: 「Slack連携の有効期限が切れています。再度「Slack連携（認可）」から連携してください。」エラー
- **実行可否**: 手動テスト

### TC-065: Slack投稿のフォーマット確認
- **目的**: 投稿されたSlackメッセージのフォーマット
- **前提**: TC-061で投稿成功
- **手順**: Slackチャンネルで投稿内容を確認
- **期待結果**: ヘッダー + 4セクション（今日やったこと、わかった事、売上ポイント、次すること）+ フッター「Powered by 簡単日報君」
- **実行可否**: 手動テスト

### TC-066: Slack投稿のユーザー名義確認
- **目的**: ユーザー名義で投稿されるか
- **前提**: TC-061で投稿成功
- **手順**: Slackチャンネルで投稿者名を確認
- **期待結果**: ログインしているGoogleアカウントのユーザー名で投稿されている（ボットではない）
- **実行可否**: 手動テスト

### TC-067: Slack投稿後の画面状態
- **目的**: 投稿成功後に画面がクリアまたは維持されるか
- **前提**: TC-061で投稿成功
- **手順**: 投稿成功メッセージ後の画面状態を確認
- **期待結果**: テキストエリアの内容が維持される（消えない）。成功メッセージが表示。
- **実行可否**: 手動テスト

### TC-068: Slack投稿ボタン連打防止
- **目的**: 二重送信が防止されるか
- **前提**: 全セクションに入力あり
- **手順**: 「Slackに投稿」ボタンを素早く2回クリック
- **期待結果**: 1回のみ送信される（ボタンが無効化される、またはローディング表示）
- **実行可否**: 手動テスト

### TC-069: SlackチャンネルID未設定時の投稿
- **目的**: チャンネルID未設定時のエラー
- **前提**: Script PropertiesのSLACK_CHANNEL_IDが空
- **手順**: 全セクションに入力し、「Slackに投稿」ボタンをクリック
- **期待結果**: 「Slackチャンネルが設定されていません」エラー
- **実行可否**: 手動テスト（Script Properties変更不可のため手順のみ）

### TC-070: 長文テキストでのSlack投稿
- **目的**: 大量テキストでの投稿
- **前提**: Slack連携済み
- **手順**: 各セクションに1000文字以上のテキストを入力し、「Slackに投稿」
- **期待結果**: 投稿が成功する（Slackのメッセージサイズ制限内であれば）
- **実行可否**: 手動テスト

---

## カテゴリ6: 履歴サイドバー（Slack/Gmail/Notion）ON/OFFと表示（TC-071〜TC-085）

### TC-071: フローティング履歴サイドバーの表示
- **目的**: サイドバーが表示されるか
- **前提**: メイン画面表示済み
- **手順**: 画面右側または下部のフローティングサイドバーを確認
- **期待結果**: 履歴サイドバーが表示される（初期展開状態）
- **実行可否**: 手動テスト

### TC-072: サイドバーの開閉トグル
- **目的**: サイドバーの展開/折りたたみ
- **前提**: メイン画面表示済み
- **手順**: サイドバーのトグルボタンをクリック
- **期待結果**: サイドバーが折りたたまれ、再クリックで展開される
- **実行可否**: 手動テスト

### TC-073: Slack履歴タブの表示
- **目的**: Slack履歴タブが選択可能か
- **前提**: サイドバー展開状態
- **手順**: Slackタブをクリック
- **期待結果**: Slack履歴セクションが表示される
- **実行可否**: 手動テスト

### TC-074: Gmail履歴タブの表示
- **目的**: Gmail履歴タブが選択可能か
- **前提**: サイドバー展開状態
- **手順**: Gmailタブをクリック
- **期待結果**: Gmail履歴セクションが表示される
- **実行可否**: 手動テスト

### TC-075: Notion履歴タブの表示
- **目的**: Notion履歴タブが選択可能か
- **前提**: サイドバー展開状態
- **手順**: Notionタブをクリック
- **期待結果**: Notion履歴セクションが表示される
- **実行可否**: 手動テスト

### TC-076: Slack履歴取得（連携済み）
- **目的**: Slack投稿履歴が取得されるか
- **前提**: Slack OAuth連携済み、当日にSlack投稿あり
- **手順**: Slackタブで「更新」または自動読み込みを確認
- **期待結果**: 当日のSlack投稿が時刻順で表示される（チャンネル名 + メッセージ冒頭30文字）
- **実行可否**: 手動テスト

### TC-077: Slack履歴取得（未連携）
- **目的**: Slack未連携時のエラー表示
- **前提**: Slack未連携状態
- **手順**: Slackタブを選択
- **期待結果**: 「Slack未連携です」メッセージが表示される
- **実行可否**: 手動テスト

### TC-078: Gmail送信メール履歴取得
- **目的**: Gmail送信履歴が取得されるか
- **前提**: 当日にGmailでメール送信あり
- **手順**: Gmailタブを選択
- **期待結果**: 当日の送信メールが時刻順で表示される（「送信: 「件名」」形式）
- **実行可否**: 手動テスト

### TC-079: Gmail受信メール履歴取得（設定ON時）
- **目的**: Gmail受信設定ON時に受信メールが表示されるか
- **前提**: ツール設定でGmail受信がON
- **手順**: Gmailタブを選択
- **期待結果**: 受信メールも「受信(差出人): 「件名」」形式で表示される
- **実行可否**: 手動テスト

### TC-080: Notion履歴取得（連携済み）
- **目的**: Notion更新ページが取得されるか
- **前提**: Notion Integration Token設定済み、当日にNotionページ更新あり
- **手順**: Notionタブを選択
- **期待結果**: 当日の更新ページが時刻順で表示される（「作成/編集: 「タイトル」」形式）
- **実行可否**: 手動テスト

### TC-081: Notion履歴取得（未連携）
- **目的**: Notion未連携時のエラー表示
- **前提**: Notion Integration Token未設定
- **手順**: Notionタブを選択
- **期待結果**: 「Notion連携が設定されていません」メッセージが表示される
- **実行可否**: 手動テスト

### TC-082: ツール設定パネルの状態（非表示確認）
- **目的**: ツール設定パネルがUIに非表示であることを確認
- **前提**: メイン画面表示済み
- **手順**: 画面上でツール設定パネル（Slack/Gmail/Notion ON/OFF）が見えるか確認
- **期待結果**: `display: none !important` で非表示になっている
- **実行可否**: 手動テスト（またはHTMLソース静的検査）

### TC-083: サイドバーのモバイル表示
- **目的**: モバイルビューでのサイドバー表示
- **前提**: モバイルビューポート
- **手順**: モバイルビュー（375px幅）でサイドバーを確認
- **期待結果**: サイドバーが画面を覆わず、適切にレイアウトされる
- **実行可否**: 手動テスト

### TC-084: 履歴データの日報への挿入
- **目的**: サイドバーの履歴をテキストエリアに挿入できるか
- **前提**: サイドバーに履歴データあり
- **手順**: サイドバーの履歴項目をクリックまたはドラッグ
- **期待結果**: 「今日やったこと」テキストエリアに履歴が挿入される（または手動コピー）
- **実行可否**: 手動テスト

### TC-085: サイドバーのエラーハンドリング
- **目的**: API取得失敗時のサイドバー表示
- **前提**: ネットワークエラーやAPI障害時
- **手順**: ネットワーク切断状態でサイドバーの履歴取得を試みる
- **期待結果**: エラーメッセージが表示され、サイドバー全体がクラッシュしない
- **実行可否**: 手動テスト

---

## カテゴリ7: 管理者画面/ドメイン制御/権限境界（TC-086〜TC-095）

### TC-086: 管理者画面アクセス（管理者ドメイン）
- **目的**: takagi.bzドメインで管理者画面にアクセスできるか
- **前提**: takagi.bzドメインのGoogleアカウントでログイン
- **手順**: GAS /exec URL + `?page=admin` にアクセス
- **期待結果**: 管理画面が表示される（許可ドメイン一覧、システム情報）
- **実行可否**: 手動テスト

### TC-087: 管理者画面アクセス（非管理者ドメイン）
- **目的**: 非管理者ドメインで管理者画面がブロックされるか
- **前提**: stepupnext.comまたはkotsuyudo.comドメインのGoogleアカウント
- **手順**: GAS /exec URL + `?page=admin` にアクセス
- **期待結果**: アクセス拒否画面が表示される（「アクセス権限がありません」）
- **実行可否**: 手動テスト

### TC-088: 管理者画面アクセス（未ログイン）
- **目的**: 未ログイン状態での管理者画面挙動
- **前提**: 未ログイン状態
- **手順**: GAS /exec URL + `?page=admin` に直接アクセス
- **期待結果**: Googleログイン画面にリダイレクトされるか、アクセス拒否される
- **実行可否**: 手動テスト

### TC-089: 管理画面の許可ドメイン一覧表示
- **目的**: 正しいドメインが表示されるか
- **前提**: TC-086で管理者画面にアクセス済み
- **手順**: 「許可されたドメイン」セクションを確認
- **期待結果**: takagi.bz（管理者バッジ付き）、stepupnext.com、kotsuyudo.comが表示
- **実行可否**: 手動テスト

### TC-090: 管理画面の「アプリに戻る」リンク
- **目的**: 管理画面からメイン画面に戻れるか
- **前提**: TC-086で管理者画面にアクセス済み
- **手順**: 「← アプリに戻る」リンクをクリック
- **期待結果**: `https://nippou.up.railway.app` にリダイレクトされる
- **実行可否**: 手動テスト

### TC-091: 管理画面のシステム情報
- **目的**: 統計情報が正しく表示されるか
- **前提**: TC-086で管理者画面にアクセス済み
- **手順**: 「システム情報」セクションを確認
- **期待結果**: 許可ドメイン数=3、管理者ドメイン数=1が表示される
- **実行可否**: 手動テスト

### TC-092: アクセス拒否画面のデザイン確認
- **目的**: 拒否画面のUI品質
- **前提**: 非許可ドメインでアクセス
- **手順**: アクセス拒否画面のデザインを確認
- **期待結果**: ロゴ、「簡単日報君」タイトル、「アクセス権限がありません」メッセージ、メールアドレス表示
- **実行可否**: 手動テスト

### TC-093: アクセス拒否画面のXSS対策
- **目的**: メールアドレス表示にXSSがないか
- **前提**: GASコードの静的確認
- **手順**: `createAccessDeniedPage()` のHTML生成で `${email}` がエスケープされているか確認
- **期待結果**: HTMLエスケープ処理がされている（GAS HtmlService.createHtmlOutput自体はエスケープしない点に注意）
- **実行可否**: 静的コード検査

### TC-094: 管理画面URLの直接共有防止
- **目的**: 管理画面URLを非管理者に共有した場合の挙動
- **前提**: 非管理者ドメインのユーザーに管理画面URLを共有
- **手順**: 非管理者がGAS /exec URL + `?page=admin` にアクセス
- **期待結果**: TC-087と同様、アクセス拒否画面が表示される
- **実行可否**: 手動テスト（TC-087と同等）

### TC-095: ドメインチェックの大文字小文字区別
- **目的**: メールドメインの大文字小文字が正しく処理されるか
- **前提**: GASコードの静的確認
- **手順**: `getUserDomain_()` で `toLowerCase()` が適用されているか確認
- **期待結果**: ドメインが小文字に変換されてから比較される
- **実行可否**: 静的コード検査

---

## カテゴリ7（追加）: UI/UX/モーダル/レスポンシブ（TC-096〜TC-100）

### TC-096: 「使い方」ボタンとチュートリアルモーダル
- **目的**: 使い方ガイドモーダルが正常に開閉するか
- **前提**: メイン画面表示済み
- **手順**: 1. 「使い方」ボタンをクリック 2. モーダルが表示されることを確認 3. 閉じるボタンまたは背景クリックでモーダルを閉じる
- **期待結果**: モーダルが開き、内容が表示され、閉じるボタンで正常に閉じる
- **実行可否**: 手動テスト

### TC-097: お知らせ（UPDATE）セクションの「閉じる」ボタン
- **目的**: お知らせパネルが閉じられるか
- **前提**: メイン画面表示済み、お知らせセクションが表示されている
- **手順**: お知らせセクションの「閉じる」ボタンをクリック
- **期待結果**: お知らせセクションが非表示になる
- **実行可否**: 手動テスト

### TC-098: 設定メニュー（歯車アイコン）の開閉
- **目的**: 設定メニューが正常に開閉するか
- **前提**: メイン画面表示済み
- **手順**: 1. 歯車アイコンをクリック 2. メニューが表示されることを確認 3. メニュー外をクリックで閉じる
- **期待結果**: 設定メニューが開き、「名前を編集」オプションが表示され、メニュー外クリックで閉じる
- **実行可否**: 手動テスト

### TC-099: レスポンシブデザイン（タブレット幅768px）
- **目的**: タブレット幅でのレイアウト崩れがないか
- **前提**: メイン画面表示済み
- **手順**: ブラウザ幅を768pxにリサイズして表示確認
- **期待結果**: 全要素が画面内に収まり、テキストエリアが適切な幅で表示される
- **実行可否**: 手動テスト

### TC-100: レスポンシブデザイン（スマホ幅375px）
- **目的**: スマホ幅でのレイアウト崩れがないか
- **前提**: メイン画面表示済み
- **手順**: ブラウザ幅を375pxにリサイズして表示確認
- **期待結果**: 全要素が画面内に収まり、ボタンがタップ可能サイズ、テキストが読める
- **実行可否**: 手動テスト

---

## テストケースサマリー

| カテゴリ | 件数 | 自動化可能 | 手動のみ | 静的検査 |
|----------|------|-----------|---------|---------|
| 1. 起動/リダイレクト/アクセス制御 | 15 | 14 | 0 | 1 |
| 2. ログイン/セッション/OAuth導線 | 15 | 3 | 12 | 0 |
| 3. 日付選択/予定取得/テンプレ反映 | 15 | 0 | 15 | 0 |
| 4. 編集/フォーマット/コピー/バリデーション | 15 | 0 | 15 | 0 |
| 5. Slack投稿と投稿後画面 | 10 | 0 | 10 | 0 |
| 6. 履歴サイドバー | 15 | 1 | 14 | 0 |
| 7. 管理者画面/ドメイン制御/権限/UI | 15 | 0 | 12 | 3 |
| **合計** | **100** | **18** | **78** | **4** |
