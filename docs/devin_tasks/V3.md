# Devin タスク: V3 実装

## これは Devin への指示です。

---

## タスク概要

簡単日報くん V3（Slack/Gmail/Notion連携）を実装する。

## 前提条件

- V2が完成・稼働していること

## 参照ドキュメント

- 要件定義書: `docs/specs/V3_requirements_ASK.md`
- 仕様書: `docs/specs/V3_plan.md`

## 実装対象ファイル

- `src/Code.gs`
- `src/Index.html`

---

## 実装手順

### Step 1: Code.gs に定数追加

```javascript
const USER_PROPERTY_TOOL_SETTINGS = 'TOOL_SETTINGS';
const PROPERTY_NOTION_TOKEN = 'NOTION_INTEGRATION_TOKEN';
const MAX_ITEMS_PER_TOOL = 20;
```

### Step 2: Code.gs に関数追加

1. `getToolSettings()` - ツール設定取得
2. `saveToolSettings(settings)` - ツール設定保存
3. `getSlackHistory()` - Slack履歴取得
4. `getGmailHistory()` - Gmail履歴取得
5. `getNotionHistory()` - Notion履歴取得
6. `getAllToolHistoryV3(dateString)` - 統合取得

### Step 3: Index.html に設定UI追加

ツールごとのON/OFFチェックボックス

### Step 4: Index.html のJavaScript変更

履歴取得をV3版に変更

---

## 完了条件

1. Slack履歴が表示される
2. Gmail履歴が表示される
3. Notion履歴が表示される
4. ツール設定が保存・反映される
5. エラー時も他ツールは動作する
6. V2機能が正常動作する

---

## 注意事項

- Slack追加スコープ（search:read）が必要
- Notion Integration Token設定が必要
- 1ツール失敗でも他は動作するようエラーハンドリングすること
